<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static', filename='css/app.css')}}">
    <title>Register</title>
</head>
<body>
    <header id="register">
        <h1>Register Instructor</h1>
        <hr>
    </header>

    <section id = "identification">
        <form action="/instructor-index", method="POST", id="registerInstructor">
            <table>
                <tr>
                    <td>First Name : </td>
                    <td><input type="text" id="firstname" placeholder="First Name" required></td>
                </tr>
                <tr>
                    <td>Last Name : </td>
                    <td><input type="text" id="lastname" placeholder="Last Name" required></td>
                </tr>
                <tr>
                    <td>Username : </td>
                    <td><input type="text" id="username" placeholder="Username" required></td>
                </tr>
                <tr>
                    <td>Email : </td>
                    <td><input type="email" id="email" placeholder="Email" required></td>
                </tr>
                <tr>
                    <td>Password : </td>
                    <td><input type="password" id="password" placeholder="6 Digits Numeric" required></td>
                </tr>
            </table>
        
        <button type="submit" id="back" onclick="goBack()">Back</button>
        <button type="submit" id="create">Create</button>

        </form>
    
    </section>

        
        <div id = "cancel">
            <a href = "/sign-in"> <br> Do you have already an account?</a>
        </div>
    
    <script>
        function goBack(){
            window.location = `${window.origin}/index`;
        }
    </script>

    <script>
        let form = document.getElementById("registerInstructor");

        form.addEventListener("submit", function(e) {
        e.preventDefault();

        let firstname = document.getElementById("firstname").value;
        let lastname = document.getElementById("lastname").value;
        let username = document.getElementById("username").value;
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;

        const info = {
            firstname,
            lastname,
            username,
            email,
            password
        };

        fetch ('http://127.0.0.1:5000/elearning/user/register/instructor', {
        method: "POST",
        headers: {
            "Content-Type" : "application/json",
            "Accept" : "application/json"
        },
        body: JSON.stringify(info)
        })
        .then(response => response.json())
        .then(response => {
            if (response !== "Please input password 6 digits numeric") {
                console.log(response);
                window.location = `${window.origin}/sign-in`
                alert("Thank You, Please continue to sign in!")
            } else {
                alert(response)
            }
        })
        .catch((error) => console.error('Error:', error))
    })

    </script>



</body>
</html>